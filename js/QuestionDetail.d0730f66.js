(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["QuestionDetail"],{"444d":function(e,t,n){"use strict";n.r(t);n("a15b");var r=n("7a23"),c=Object(r["withScopeId"])("data-v-689aea4c");Object(r["pushScopeId"])("data-v-689aea4c");var o={class:"question-detail"},a={class:"left"},i={class:"question"},s={class:"title"},u={class:"info"},l={class:"tag"},d={class:"answer"},b={class:"h2-title"},j={class:"list"},p={class:"info"},O={key:0,class:"question-author"},v=Object(r["createVNode"])("div",{class:"h2-title"},"撰写回答",-1),g={class:"my-answer"},f={class:"submit-btn"},m=Object(r["createTextVNode"])(" 提交回答 "),h={class:"right"},w={class:"box"},V=Object(r["createVNode"])("div",{class:"title"},"相关文章",-1),k={key:0,class:"article-list"},q=Object(r["createVNode"])("div",{class:"box"},[Object(r["createVNode"])("div",{class:"title"},"添加相关文章")],-1);Object(r["popScopeId"])();var N=c((function(e,t,n,N,y,I){var A=Object(r["resolveComponent"])("v-md-editor"),C=Object(r["resolveComponent"])("el-button"),B=Object(r["resolveComponent"])("el-empty");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])("div",s,Object(r["toDisplayString"])(e.questionTitle),1),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",null,Object(r["toDisplayString"])(e.questionAuthor),1),Object(r["createVNode"])("div",null,"发布于："+Object(r["toDisplayString"])(e.questionDate),1)]),Object(r["createVNode"])("div",l,"Tag："+Object(r["toDisplayString"])(e.questionTag.join("，")),1),Object(r["createVNode"])(A,{class:"cont",modelValue:e.questionContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.questionContent=t}),mode:"preview"},null,8,["modelValue"])]),Object(r["createVNode"])("div",d,[Object(r["createVNode"])("div",b,Object(r["toDisplayString"])(e.answerList.length)+"个回答",1),Object(r["createVNode"])("div",j,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.answerList,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"item",key:t.objectId},[Object(r["createVNode"])("div",p,[Object(r["createVNode"])("div",null,Object(r["toDisplayString"])(t.author),1),e.questionAuthor==t.author?(Object(r["openBlock"])(),Object(r["createBlock"])("div",O," 题主 ")):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",null,"发布于："+Object(r["toDisplayString"])(e.formatTimefn(t.createdAt)),1)]),Object(r["createVNode"])(A,{modelValue:t.content,"onUpdate:modelValue":function(e){return t.content=e},mode:"preview"},null,8,["modelValue","onUpdate:modelValue"])])})),128))]),v,Object(r["createVNode"])("div",g,[Object(r["createVNode"])(A,{modelValue:e.editorUserAnswer,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.editorUserAnswer=t}),height:"280px",onChange:e.handleChange,"right-toolbar":"fullscreen","left-toolbar":"undo redo clear | h bold italic strikethrough quote emoji | tip ul ol table hr | todo-list link image code "},null,8,["modelValue","onChange"]),Object(r["createVNode"])("div",f,[Object(r["createVNode"])(C,{type:"primary",onClick:e.submitAnswer},{default:c((function(){return[m]})),_:1},8,["onClick"])])])])]),Object(r["createVNode"])("div",h,[Object(r["createVNode"])("div",w,[V,e.articleLlist.length?(Object(r["openBlock"])(),Object(r["createBlock"])("div",k,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.articleLlist,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{onClick:function(n){return e.openUrl(t.url)},class:"item",key:t.objectId},Object(r["toDisplayString"])(t.title),9,["onClick"])})),128))])):(Object(r["openBlock"])(),Object(r["createBlock"])(B,{key:1,description:"暂无相关文章"}))]),q])])})),y=n("5530"),I=(n("96cf"),n("1da1")),A=n("79f6"),C=n("dbe5"),B=n("6c02"),D=n("3fd4");n("99af");function x(e,t){var n=t||"1",r=new Date(e),c=new Date,o=r.getFullYear(),a=r.getMonth()+1,i=r.getDate(),s=r.getHours(),u=r.getMinutes(),l=r.getSeconds(),d=c.getFullYear(),b=c.getMonth()+1,j=c.getDate(),p=c.getHours(),O=c.getMinutes(),v=c.getSeconds();return"2"===n?"".concat(o,"年").concat(a,"月").concat(i,"号 ").concat(s,"点").concat(u,"分"):d-o>1?d-o+"年前"+a+"月"+i+"号"+s+"点":d-o>0?"去年"+a+"月"+i+"号"+s+"点":b-a>0?"今年"+a+"月"+i+"号"+s+"点":j-i>1?j-i+"天前"+s+"点":j-i>0?"昨天"+s+"点":p-s>0?p-s+"小时前":O-u>0?O-u+"分钟前":v-l>0?v-l+"秒前":"刚刚"}var S=Object(r["defineComponent"])({setup:function(){var e=x,t=Object(r["inject"])("lodash"),n=Object(r["reactive"])({questionId:"",questionTitle:"",questionContent:"",questionAuthor:"",questionDate:"",questionTag:[],userAnswer:"",editorUserAnswer:"",answerList:[],articleLlist:[]}),c=Object(r["toRefs"])(n),o=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{objectId:n.questionId}}},e.next=3,Object(C["a"])("get",A["a"].questionAPI,t);case 3:if(r=e.sent,r.results.length){e.next=6;break}return e.abrupt("return",D["b"].error("查询题目信息出错，请查看其他题目"));case 6:r=r.results[0],n.questionTitle=r.title,n.questionContent=r.content,n.questionAuthor=r.author,n.questionDate=r.createdAt.substr(0,10),n.questionTag=r.tag;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{questionId:n.questionId}}},e.next=3,Object(C["a"])("get",A["a"].questionArticleAPI,t);case 3:r=e.sent,console.log(r),n.articleLlist=r.results;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{questionId:n.questionId}}},e.next=3,Object(C["a"])("get",A["a"].answerAPI,t);case 3:r=e.sent,n.answerList=r.results;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e){window.open(e)};Object(r["onMounted"])((function(){var e=Object(B["c"])();n.questionId=e.query.id,o(),i(),a()}));var u=t.debounce((function(e){n.userAnswer=e}),1e3),l=function(){var e=Object(I["a"])(regeneratorRuntime.mark((function e(){var t,r,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(localStorage.getItem("userName")){e.next=2;break}return e.abrupt("return",D["b"].error("未登录不能回答题目"));case 2:if(t=n.userAnswer,r=n.questionId,t.length){e.next=5;break}return e.abrupt("return",D["b"].error("回答内容不能为空"));case 5:return e.next=7,Object(C["a"])("post",A["a"].answerAPI,{content:t,questionId:r,author:localStorage.getItem("userName")});case 7:c=e.sent,c.objectId?(D["b"].success("发布成功"),n.userAnswer="",n.editorUserAnswer="",i()):D["b"].error("发布失败，请稍后再试");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y["a"])(Object(y["a"])({},c),{},{handleChange:u,submitAnswer:l,formatTimefn:e,openUrl:s})}});n("ac88");S.render=N,S.__scopeId="data-v-689aea4c";t["default"]=S},"548b":function(e,t,n){},a15b:function(e,t,n){"use strict";var r=n("23e7"),c=n("44ad"),o=n("fc6a"),a=n("a640"),i=[].join,s=c!=Object,u=a("join",",");r({target:"Array",proto:!0,forced:s||!u},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},ac88:function(e,t,n){"use strict";n("548b")}}]);