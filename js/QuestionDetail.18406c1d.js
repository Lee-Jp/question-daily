(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["QuestionDetail"],{"1ac8a":function(e,t,r){"use strict";r("c801")},"444d":function(e,t,r){"use strict";r.r(t);r("a15b");var n=r("7a23"),c=Object(n["withScopeId"])("data-v-72677f2a");Object(n["pushScopeId"])("data-v-72677f2a");var o={class:"question-detail"},a={class:"left"},i={class:"question"},u={class:"title"},s={class:"info"},l={class:"tag"},d={class:"answer"},b={class:"h2-title"},j={class:"list"},p={class:"info"},O={key:0,class:"question-author"},f=Object(n["createVNode"])("div",{class:"h2-title"},"撰写回答",-1),m={class:"my-answer"},v={class:"submit-btn"},g=Object(n["createTextVNode"])(" 提交回答 "),h={class:"right"},V={class:"box"},w=Object(n["createVNode"])("div",{class:"title"},"相关文章",-1),k={key:0,class:"article-list"},N={class:"box"},q=Object(n["createVNode"])("div",{class:"title"},"添加相关文章",-1),I={class:"form"},y=Object(n["createTextVNode"])("提交");Object(n["popScopeId"])();var A=c((function(e,t,r,A,x,C){var B=Object(n["resolveComponent"])("v-md-editor"),D=Object(n["resolveComponent"])("el-button"),S=Object(n["resolveComponent"])("el-empty"),F=Object(n["resolveComponent"])("el-input"),U=Object(n["resolveComponent"])("el-form-item"),R=Object(n["resolveComponent"])("el-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[Object(n["createVNode"])("div",a,[Object(n["createVNode"])("div",i,[Object(n["createVNode"])("div",u,Object(n["toDisplayString"])(e.questionTitle),1),Object(n["createVNode"])("div",s,[Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(e.questionAuthor),1),Object(n["createVNode"])("div",null,"发布于："+Object(n["toDisplayString"])(e.questionDate),1)]),Object(n["createVNode"])("div",l,"Tag："+Object(n["toDisplayString"])(e.questionTag.join("，")),1),Object(n["createVNode"])(B,{class:"cont",modelValue:e.questionContent,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.questionContent=t}),mode:"preview"},null,8,["modelValue"])]),Object(n["createVNode"])("div",d,[Object(n["createVNode"])("div",b,Object(n["toDisplayString"])(e.answerList.length)+"个回答",1),Object(n["createVNode"])("div",j,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.answerList,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{class:"item",key:t.objectId},[Object(n["createVNode"])("div",p,[Object(n["createVNode"])("div",null,Object(n["toDisplayString"])(t.author),1),e.questionAuthor==t.author?(Object(n["openBlock"])(),Object(n["createBlock"])("div",O," 题主 ")):Object(n["createCommentVNode"])("",!0),Object(n["createVNode"])("div",null,"发布于："+Object(n["toDisplayString"])(e.formatTimefn(t.createdAt)),1)]),Object(n["createVNode"])(B,{modelValue:t.content,"onUpdate:modelValue":function(e){return t.content=e},mode:"preview"},null,8,["modelValue","onUpdate:modelValue"])])})),128))]),f,Object(n["createVNode"])("div",m,[Object(n["createVNode"])(B,{modelValue:e.editorUserAnswer,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.editorUserAnswer=t}),height:"280px",onChange:e.handleChange,"right-toolbar":"fullscreen","left-toolbar":"undo redo clear | h bold italic strikethrough quote emoji | tip ul ol table hr | todo-list link image code "},null,8,["modelValue","onChange"]),Object(n["createVNode"])("div",v,[Object(n["createVNode"])(D,{type:"primary",onClick:e.submitAnswer},{default:c((function(){return[g]})),_:1},8,["onClick"])])])])]),Object(n["createVNode"])("div",h,[Object(n["createVNode"])("div",V,[w,e.articleList.length?(Object(n["openBlock"])(),Object(n["createBlock"])("div",k,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(e.articleList,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("div",{onClick:function(r){return e.openUrl(t.url)},class:"item",key:t.objectId},Object(n["toDisplayString"])(t.title),9,["onClick"])})),128))])):(Object(n["openBlock"])(),Object(n["createBlock"])(S,{key:1,description:"暂无相关文章"}))]),Object(n["createVNode"])("div",N,[q,Object(n["createVNode"])("div",I,[Object(n["createVNode"])(R,{model:e.articleForm,"label-width":"60px","label-suffix":"："},{default:c((function(){return[Object(n["createVNode"])(U,{label:"标题"},{default:c((function(){return[Object(n["createVNode"])(F,{modelValue:e.articleForm.title,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.articleForm.title=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{label:"链接"},{default:c((function(){return[Object(n["createVNode"])(F,{modelValue:e.articleForm.url,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.articleForm.url=t})},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(U,{class:"submit-btn"},{default:c((function(){return[Object(n["createVNode"])(D,{type:"primary",onClick:e.addArticle},{default:c((function(){return[y]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model"])])])])])})),x=r("5530"),C=(r("96cf"),r("1da1")),B=r("79f6"),D=r("dbe5"),S=r("6c02"),F=r("3fd4");r("99af");function U(e,t){var r=t||"1",n=new Date(e),c=new Date,o=n.getFullYear(),a=n.getMonth()+1,i=n.getDate(),u=n.getHours(),s=n.getMinutes(),l=n.getSeconds(),d=c.getFullYear(),b=c.getMonth()+1,j=c.getDate(),p=c.getHours(),O=c.getMinutes(),f=c.getSeconds();return"2"===r?"".concat(o,"年").concat(a,"月").concat(i,"号 ").concat(u,"点").concat(s,"分"):d-o>1?d-o+"年前"+a+"月"+i+"号"+u+"点":d-o>0?"去年"+a+"月"+i+"号"+u+"点":b-a>0?"今年"+a+"月"+i+"号"+u+"点":j-i>1?j-i+"天前"+u+"点":j-i>0?"昨天"+u+"点":p-u>0?p-u+"小时前":O-s>0?O-s+"分钟前":f-l>0?f-l+"秒前":"刚刚"}var R=Object(n["defineComponent"])({setup:function(){var e=U,t=Object(n["inject"])("lodash"),r=Object(n["reactive"])({questionId:"",questionTitle:"",questionContent:"",questionAuthor:"",questionDate:"",questionTag:[],userAnswer:"",editorUserAnswer:"",answerList:[],articleList:[],articleForm:{title:"",url:""}}),c=Object(n["toRefs"])(r),o=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{objectId:r.questionId}}},e.next=3,Object(D["a"])("get",B["a"].questionAPI,t);case 3:if(n=e.sent,n.results.length){e.next=6;break}return e.abrupt("return",F["b"].error("查询题目信息出错，请查看其他题目"));case 6:n=n.results[0],r.questionTitle=n.title,r.questionContent=n.content,r.questionAuthor=n.author,r.questionDate=n.createdAt.substr(0,10),r.questionTag=n.tag;case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{questionId:r.questionId}}},e.next=3,Object(D["a"])("get",B["a"].questionArticleAPI,t);case 3:n=e.sent,console.log(n),r.articleList=n.results;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={params:{where:{questionId:r.questionId}}},e.next=3,Object(D["a"])("get",B["a"].answerAPI,t);case 3:n=e.sent,r.answerList=n.results;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(e){window.open(e)},s=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n,c,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=r.articleForm,n=t.title,c=t.url,o=r.questionId,n){e.next=4;break}return e.abrupt("return",F["b"].error("请输入文章标题"));case 4:if(c){e.next=6;break}return e.abrupt("return",F["b"].error("请输入文章链接"));case 6:return e.next=8,Object(D["a"])("post",B["a"].questionArticleAPI,{title:n,url:c,questionId:o});case 8:if(i=e.sent,!i.objectId){e.next=16;break}F["b"].success("提交成功"),r.articleForm.title="",r.articleForm.url="",a(),e.next=17;break;case 16:return e.abrupt("return",F["b"].error("提交出错，请稍后再试"));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n["onMounted"])((function(){var e=Object(S["c"])();r.questionId=e.query.id,o(),i(),a()}));var l=t.debounce((function(e){r.userAnswer=e}),1e3),d=function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,n,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(localStorage.getItem("userName")){e.next=2;break}return e.abrupt("return",F["b"].error("未登录不能回答题目"));case 2:if(t=r.userAnswer,n=r.questionId,t.length){e.next=5;break}return e.abrupt("return",F["b"].error("回答内容不能为空"));case 5:return e.next=7,Object(D["a"])("post",B["a"].answerAPI,{content:t,questionId:n,author:localStorage.getItem("userName")});case 7:c=e.sent,c.objectId?(F["b"].success("发布成功"),r.userAnswer="",r.editorUserAnswer="",i()):F["b"].error("发布失败，请稍后再试");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(x["a"])(Object(x["a"])({},c),{},{handleChange:l,submitAnswer:d,formatTimefn:e,openUrl:u,addArticle:s})}});r("1ac8a");R.render=A,R.__scopeId="data-v-72677f2a";t["default"]=R},a15b:function(e,t,r){"use strict";var n=r("23e7"),c=r("44ad"),o=r("fc6a"),a=r("a640"),i=[].join,u=c!=Object,s=a("join",",");n({target:"Array",proto:!0,forced:u||!s},{join:function(e){return i.call(o(this),void 0===e?",":e)}})},c801:function(e,t,r){}}]);